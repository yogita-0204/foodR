{% extends "base.html" %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="bg-white border border-slate-200 rounded-2xl p-8 shadow-sm">
        <h1 class="text-2xl font-semibold mb-6">Share Your Feedback</h1>
        
        <div class="mb-6 p-4 bg-teal-50 border border-teal-200 rounded-lg">
            <h2 class="font-semibold text-teal-900 mb-2">Order Details</h2>
            <p class="text-sm text-teal-800"><strong>Shop:</strong> {{ order.shop.name }}</p>
            <p class="text-sm text-teal-800"><strong>Pickup Time:</strong> {{ order.pickup_time|date:"F d, Y at g:i A" }}</p>
            <p class="text-sm text-teal-800"><strong>Token:</strong> #{{ order.token_number }}</p>
            <p class="text-sm text-teal-800"><strong>Total:</strong> ₹{{ order.total_price }}</p>
        </div>
        
        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-3">
                    How would you rate your experience?
                </label>
                <div class="space-y-2">
                    {% for value, label in form.rating.field.choices %}
                        {% if value %}  {# Only show non-empty values #}
                        <label class="flex items-center p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer transition-colors">
                            <input type="radio" name="rating" value="{{ value }}" class="mr-3 w-4 h-4 text-teal-600" required>
                            <span class="flex-1">{{ label }}</span>
                            <span class="text-amber-500 text-xl">
                                {% with value|add:0 as rating_num %}
                                    {% for i in "12345"|slice:":rating_num" %}★{% endfor %}
                                {% endwith %}
                            </span>
                        </label>
                        {% endif %}
                    {% endfor %}
                </div>
                {% if form.rating.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.rating.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.comment.id_for_label }}" class="block text-sm font-medium text-slate-700 mb-2">
                    Additional Comments (Optional)
                </label>
                {{ form.comment }}
                {% if form.comment.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.comment.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="flex gap-3">
                <button type="submit" class="px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                    Submit Feedback
                </button>
                <a href="{% url 'orders:list' %}" class="px-6 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
